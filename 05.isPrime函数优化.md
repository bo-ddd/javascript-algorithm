### isPrime函数的优化

> 上节课的思考题是优化isPrime方法，如果你进行了思考，你会发现，该函数是不可以取消for循环的，也就是说，不可以将O(n)复杂度转换为O(1)复杂度那么我们为了优化该方法，只能从一个方法下手——减少for循环的次数

观察上节课函数调用执行顺序：

```javascript
isPrime(5) 
//isPrime(5)函数的运行执行顺序为： 
// 5 % 2 => 1
// 5 % 3 => 2
// 5 % 4 => 1
// 没有满足 num % i === 0,的条件， 所以结果为 true;

isPrime(9)
// isPrime(9)函数的运行执行顺序为：
// 9 % 2 => 1
// 9 % 3 => 0  
// 满足条件  num % i === 0 所以函数终止，该函数返回false;
```

得出循环终止的条件为:

​	如果一个数a的平方等于b,那么b一定是非素数;

> 说明: 此结论是根据上述代码中的 9  % 3 => 0 的结论推导而出的, 因为 3的平方是9,所以9能被3整除,所以我们就没有必要去循环整个num,只需要循环num的平方根即可

代码:

```javascript
isPrime(num){
    for(let i = 0; i < Math.sqrt(num); i++){
        if(num % i === 0) return false;
    }
    return true;
}
```

上述代码中将之前的循环num变成了循环num的平方根

测试代码如下:

```javascript
isPrime(27277)  //

//未优化之前,该方法最多循环 num 次,也就是 27277 次;
//得用Math.sqrt(num) 优化后, 循环执行 166次; 
// 大大的缩短了循环次数
```

所以:  优化之前的isPrime()的时间复杂度为 O(n);

而优化后的isPrime()时间复杂度为O(sqrt(n));

总结:

1. 总结可得,我们应该尽可能的减少循环的使用次数;
2. 如果非要使用循环,则应该尽可能的缩短循环次数;
3. 学会利用<code>Math.sqrt</code>进行循环优化;